(function(_0x209af3,_0x210096){const _0x3c0aa7=a0_0x14c3,_0x2721f6=_0x209af3();while(!![]){try{const _0x34e29f=parseInt(_0x3c0aa7(0xfc))/0x1+-parseInt(_0x3c0aa7(0xca))/0x2+-parseInt(_0x3c0aa7(0xff))/0x3*(parseInt(_0x3c0aa7(0xcb))/0x4)+parseInt(_0x3c0aa7(0x10a))/0x5*(parseInt(_0x3c0aa7(0xe0))/0x6)+parseInt(_0x3c0aa7(0xd6))/0x7+parseInt(_0x3c0aa7(0xe2))/0x8*(-parseInt(_0x3c0aa7(0x107))/0x9)+-parseInt(_0x3c0aa7(0x10b))/0xa*(-parseInt(_0x3c0aa7(0xdf))/0xb);if(_0x34e29f===_0x210096)break;else _0x2721f6['push'](_0x2721f6['shift']());}catch(_0x2db84e){_0x2721f6['push'](_0x2721f6['shift']());}}}(a0_0x2c7b,0xdfc9b));function a0_0x2c7b(){const _0x4862b0=['slice','utf8','account','yellow','DttWaMuVvTiduZRnguLF7jNxTgiMBZ1hyAumKUiL2KRL','Confirm\x20Bundle\x20Manually\x20(JITO):\x20https://explorer.jito.wtf/bundle/','floor','Processing\x20wallet\x20','No\x20zero\x20balance\x20accounts\x20found\x20for\x20any\x20wallet.','Bundle\x20','Total\x20of\x20','fromSecretKey','amount','Processing\x20batch\x20','parse','Error\x20getting\x20balance\x20for\x20token\x20account\x20','\x20token\x20accounts\x20for\x20wallet:\x20','push','green','Error\x20processing\x20account\x20','301349lrSuzl','payer','WALLET_BUYERS_FOLDER','15aBdzQE','filter','96gYZGLnJYVFmbjzopPSU6QiEV5fGqZNyN9nmNhvrZU5','length','red','RPC_URL','getTokenAccountBalance','getTokenAccountsByOwner','15625593EVHuPo','Invalid\x20tip\x20public\x20key\x20detected:\x20','encode','3895fIkIjo','5452640CORoxb','log','No\x20token\x20accounts\x20with\x20zero\x20balance\x20to\x20close.','ADaUMid9yfUytqMBgopwjb2DTLSokTSzL1zt6iGPaS49','existsSync','\x20(with\x20tip)','addTransactions','blockhash','join','BLOCK_ENGINE_URL','wallet','toString','compileToV0Message','random','1418270PIhESU','233132pRZNeJ','WS_URL','DfXygSm4jCyNCybVYYK6DwvWqjKee8pbDmJGcLWNDXjh','from','ADuUkR4vqLUMWXxW9gh6D6L8pMSawimctcNZ5pGwDcEt','\x20created\x20with\x20','Secret\x20key\x20file\x20','sign','map','readFileSync','publicKey','1342530oAQgLc','transfer','toBase58','privKey','pubkey','value','secretKey','HFqU5x63VTqvQss8hp11i4wVV8bD44PvwucfZ2bU7gRe','error','55krAUjw','3342vocEyQ','decode','8FeoOTI','SENDER','pubKey','data','3AVi9Tg9Uo68tJfuvoKvqKNWKc5wPdSSdeBnizKZ6j','\x20of\x20'];a0_0x2c7b=function(){return _0x4862b0;};return a0_0x2c7b();}import{PublicKey,Keypair,Connection,TransactionMessage,VersionedTransaction,SystemProgram,TransactionInstruction}from'@solana/web3.js';import{TOKEN_PROGRAM_ID,createCloseAccountInstruction}from'@solana/spl-token';import{searcherClient}from'jito-ts/dist/sdk/block-engine/searcher.js';import{Bundle}from'jito-ts/dist/sdk/block-engine/types.js';import a0_0x5ae494 from'bs58';import a0_0x56e420 from'chalk';import a0_0x375822 from'fs';import a0_0x54f595 from'path';import{sendBundle,sendBundle2}from'./sendBundle.js';async function loadConfig(){const _0x1f2c3a=a0_0x14c3;return JSON[_0x1f2c3a(0xf6)](a0_0x375822[_0x1f2c3a(0xd4)]('./config.json',_0x1f2c3a(0xe9)));}async function loadWallets(){const _0x538576=a0_0x14c3,_0x15528a=await loadConfig(),_0xb1d1e7=_0x15528a[_0x538576(0xfe)],_0x2b0567=[];for(let _0x5229a5=0x1;_0x5229a5<=0x14;_0x5229a5++){const _0x588823=a0_0x54f595[_0x538576(0x113)](_0xb1d1e7,_0x538576(0x115)+_0x5229a5+'.json');if(a0_0x375822[_0x538576(0x10f)](_0x588823)){const _0xdac2=Uint8Array[_0x538576(0xce)](JSON['parse'](a0_0x375822['readFileSync'](_0x588823,_0x538576(0xe9)))),_0x8480e=Keypair[_0x538576(0xf3)](_0xdac2);_0x2b0567[_0x538576(0xf9)]({'pubKey':_0x8480e['publicKey'][_0x538576(0x116)](),'privKey':a0_0x5ae494[_0x538576(0x109)](_0x8480e[_0x538576(0xdc)])});}}return _0x2b0567;}async function loadDevWallet(_0xf80b7f){const _0x5e52c5=a0_0x14c3;if(a0_0x375822[_0x5e52c5(0x10f)](_0xf80b7f)){const _0x541f1e=Uint8Array['from'](JSON[_0x5e52c5(0xf6)](a0_0x375822[_0x5e52c5(0xd4)](_0xf80b7f,_0x5e52c5(0xe9))));return Keypair['fromSecretKey'](_0x541f1e);}else console[_0x5e52c5(0xde)](a0_0x56e420[_0x5e52c5(0x103)](_0x5e52c5(0xd1)+_0xf80b7f+'\x20does\x20not\x20exist.')),process['exit'](0x1);}async function closeAccounts(){const _0x16cb61=a0_0x14c3,_0x357401=await loadConfig(),_0x59bde4=_0x357401[_0x16cb61(0x104)],_0xea5005=_0x357401[_0x16cb61(0xcc)],_0x280659=_0x357401[_0x16cb61(0x114)],_0x37f06c=new Connection(_0x59bde4,{'commitment':'confirmed','wsEndpoint':_0xea5005}),_0x2b38d6=await loadWallets(),_0x3ccbae=await loadDevWallet(_0x357401['SECRET_KEY_PATH']),_0x1e43b3=Keypair[_0x16cb61(0xf3)](new Uint8Array(a0_0x5ae494[_0x16cb61(0xe1)](_0x357401[_0x16cb61(0xe3)]))),_0x35d0ec=0x7;let _0x5e5f1e=[];for(let _0x4aeeed=0x0;_0x4aeeed<_0x2b38d6[_0x16cb61(0x102)];_0x4aeeed++){const _0xf3e0ed=_0x2b38d6[_0x4aeeed];console[_0x16cb61(0x10c)](a0_0x56e420[_0x16cb61(0xfa)](_0x16cb61(0xef)+(_0x4aeeed+0x1)+':\x20'+_0xf3e0ed[_0x16cb61(0xe4)]));const _0x4deab0=new PublicKey(_0xf3e0ed['pubKey']),_0x173ced=Keypair[_0x16cb61(0xf3)](new Uint8Array(a0_0x5ae494['decode'](_0xf3e0ed[_0x16cb61(0xd9)]))),_0x2b0cd5=await _0x37f06c[_0x16cb61(0x106)](_0x4deab0,{'programId':TOKEN_PROGRAM_ID});console[_0x16cb61(0x10c)](a0_0x56e420[_0x16cb61(0xfa)]('Found\x20'+_0x2b0cd5[_0x16cb61(0xdb)][_0x16cb61(0x102)]+_0x16cb61(0xf8)+_0xf3e0ed[_0x16cb61(0xe4)]));for(const _0x39832f of _0x2b0cd5[_0x16cb61(0xdb)]){try{const _0x362af7=await _0x37f06c[_0x16cb61(0x105)](_0x39832f[_0x16cb61(0xda)]);_0x362af7['value'][_0x16cb61(0xf4)]==='0'&&_0x5e5f1e[_0x16cb61(0xf9)]({'account':_0x39832f,'walletAddress':_0x4deab0,'payer':_0x173ced});}catch(_0x1357d6){console[_0x16cb61(0xde)](a0_0x56e420['red'](_0x16cb61(0xfb)+_0x39832f['pubkey'][_0x16cb61(0xd8)]()+':',_0x1357d6));}}console['log'](a0_0x56e420[_0x16cb61(0xfa)]('Total\x20zero-balance\x20accounts\x20so\x20far:\x20'+_0x5e5f1e[_0x16cb61(0x102)]));}if(_0x5e5f1e['length']===0x0){console[_0x16cb61(0x10c)](a0_0x56e420[_0x16cb61(0xeb)](_0x16cb61(0xf0)));return;}const _0x434dc0=chunkArray(_0x5e5f1e,_0x35d0ec);console[_0x16cb61(0x10c)](a0_0x56e420['green'](_0x16cb61(0xf2)+_0x434dc0[_0x16cb61(0x102)]+'\x20transaction(s)\x20will\x20be\x20created\x20for\x20the\x20bundle.'));const _0x541959=[];for(let _0x4ab3da=0x0;_0x4ab3da<_0x434dc0[_0x16cb61(0x102)];_0x4ab3da++){const _0x7b5df7=_0x434dc0[_0x4ab3da];console[_0x16cb61(0x10c)](a0_0x56e420[_0x16cb61(0xeb)](_0x16cb61(0xf5)+(_0x4ab3da+0x1)+_0x16cb61(0xe7)+_0x434dc0[_0x16cb61(0x102)]));const _0x4dfa9a=_0x7b5df7[_0x16cb61(0xd3)](_0x1e8ff7=>_0x1e8ff7[_0x16cb61(0xfd)]),_0x2bab17=_0x4ab3da===_0x434dc0[_0x16cb61(0x102)]-0x1,_0x40546b=await createCloseTransaction(_0x7b5df7[_0x16cb61(0xd3)](_0x577661=>_0x577661[_0x16cb61(0xea)][_0x16cb61(0xda)]),_0x1e43b3[_0x16cb61(0xd5)],_0x3ccbae,_0x4dfa9a,_0x37f06c,_0x357401,_0x2bab17);_0x40546b&&(_0x541959[_0x16cb61(0xf9)](_0x40546b),console[_0x16cb61(0x10c)]('Transaction\x20created'+(_0x2bab17?_0x16cb61(0x110):'')));}const _0x4cc7a3=0x5,_0x461457=chunkArray(_0x541959,_0x4cc7a3);for(let _0x24e585=0x0;_0x24e585<_0x461457['length'];_0x24e585++){const _0x568755=_0x461457[_0x24e585],_0x348585=new Bundle([]);_0x348585[_0x16cb61(0x111)](..._0x568755),console['log'](a0_0x56e420['green'](_0x16cb61(0xf1)+(_0x24e585+0x1)+_0x16cb61(0xd0)+_0x568755[_0x16cb61(0x102)]+'\x20transaction(s).'));try{const _0x564bd4=await sendBundle2(_0x348585,_0x280659);console[_0x16cb61(0x10c)](_0x16cb61(0xed)+_0x564bd4);}catch(_0x1bb18f){console[_0x16cb61(0xde)]('Error\x20sending\x20bundle\x20'+(_0x24e585+0x1)+':',_0x1bb18f);}_0x24e585<_0x461457[_0x16cb61(0x102)]-0x1&&await new Promise(_0x44dc70=>setTimeout(_0x44dc70,0x3e8));}}function chunkArray(_0x463380,_0x435778){const _0x47ac6e=a0_0x14c3,_0x4aee84=[];for(let _0x5b8f81=0x0;_0x5b8f81<_0x463380['length'];_0x5b8f81+=_0x435778){_0x4aee84[_0x47ac6e(0xf9)](_0x463380[_0x47ac6e(0xe8)](_0x5b8f81,_0x5b8f81+_0x435778));}return _0x4aee84;}function a0_0x14c3(_0x3f3eab,_0x3ebe9c){const _0x2c7b8c=a0_0x2c7b();return a0_0x14c3=function(_0x14c30c,_0x15ffd0){_0x14c30c=_0x14c30c-0xca;let _0x3dd08e=_0x2c7b8c[_0x14c30c];return _0x3dd08e;},a0_0x14c3(_0x3f3eab,_0x3ebe9c);}function getValidTipAccounts(_0x4f2a07){const _0x2bfb86=a0_0x14c3;return _0x4f2a07[_0x2bfb86(0x100)](_0x29e4f0=>{const _0x2950d9=_0x2bfb86;try{return new PublicKey(_0x29e4f0),!![];}catch(_0x5d5c69){return console['error'](_0x2950d9(0x108)+_0x29e4f0),![];}});}async function createCloseTransaction(_0xdce590,_0x4177cc,_0x40e728,_0x59f7e8,_0x1bd8b3,_0x4cb825,_0x49993b){const _0x5e8391=a0_0x14c3,_0x5da0ab=Keypair['fromSecretKey'](new Uint8Array(a0_0x5ae494[_0x5e8391(0xe1)](_0x4cb825['JITO_TIP_SECRET_KEY']))),_0x20ba27=Keypair['fromSecretKey'](new Uint8Array(a0_0x5ae494[_0x5e8391(0xe1)](_0x4cb825['SENDER']))),_0x25fc29=_0x4cb825['JITO_TIP_AMOUNT'],_0x21c2fd=_0x25fc29*0x3b9aca00,_0x260295=[],_0x17fac1=[];for(let _0x5ca993=0x0;_0x5ca993<_0xdce590[_0x5e8391(0x102)];_0x5ca993++){const _0x52812e=_0xdce590[_0x5ca993];try{const _0x2eb827=await _0x1bd8b3['getTokenAccountBalance'](_0x52812e);if(_0x2eb827[_0x5e8391(0xdb)][_0x5e8391(0xf4)]!=='0')continue;}catch(_0x589a12){console[_0x5e8391(0xde)](a0_0x56e420['red'](_0x5e8391(0xf7)+_0x52812e[_0x5e8391(0xd8)]()+':',_0x589a12));continue;}const _0x420efc=_0x59f7e8[_0x5ca993],_0x45d92a=createCloseAccountInstruction(_0x52812e,_0x20ba27[_0x5e8391(0xd5)],_0x420efc[_0x5e8391(0xd5)]);_0x260295[_0x5e8391(0xf9)](new TransactionInstruction({'keys':[{'pubkey':_0x52812e,'isSigner':![],'isWritable':!![]},{'pubkey':_0x20ba27['publicKey'],'isSigner':![],'isWritable':!![]},{'pubkey':_0x420efc[_0x5e8391(0xd5)],'isSigner':!![],'isWritable':![]}],'programId':TOKEN_PROGRAM_ID,'data':_0x45d92a[_0x5e8391(0xe5)]})),_0x17fac1[_0x5e8391(0xf9)](_0x420efc);}if(_0x260295[_0x5e8391(0x102)]===0x0)return console[_0x5e8391(0x10c)](a0_0x56e420[_0x5e8391(0xeb)](_0x5e8391(0x10d))),null;if(_0x49993b){const _0x1ed2af=[_0x5e8391(0x101),_0x5e8391(0xdd),'Cw8CFyM9FkoMi7K7Crf6HNQqf4uEMzpKw6QNghXLvLkY',_0x5e8391(0x10e),_0x5e8391(0xcd),_0x5e8391(0xcf),_0x5e8391(0xec),_0x5e8391(0xe6)],_0x4d1f0f=getValidTipAccounts(_0x1ed2af);if(_0x4d1f0f[_0x5e8391(0x102)]===0x0){}const _0x13ee84=Math[_0x5e8391(0xee)](Math[_0x5e8391(0x118)]()*_0x4d1f0f[_0x5e8391(0x102)]),_0x132f4e=new PublicKey(_0x4d1f0f[_0x13ee84]),_0x2abbcc=SystemProgram[_0x5e8391(0xd7)]({'fromPubkey':_0x5da0ab['publicKey'],'toPubkey':_0x132f4e,'lamports':_0x21c2fd});_0x260295[_0x5e8391(0xf9)](_0x2abbcc);}const _0x530ddc=await _0x1bd8b3['getLatestBlockhash']('finalized'),_0x187019=_0x530ddc[_0x5e8391(0x112)],_0x7820d4=new TransactionMessage({'payerKey':_0x20ba27[_0x5e8391(0xd5)],'instructions':_0x260295,'recentBlockhash':_0x187019})[_0x5e8391(0x117)](),_0x15cbab=new VersionedTransaction(_0x7820d4);return _0x49993b?_0x15cbab[_0x5e8391(0xd2)]([_0x20ba27,_0x5da0ab,..._0x17fac1]):_0x15cbab[_0x5e8391(0xd2)]([_0x20ba27,..._0x17fac1]),_0x15cbab;}export default closeAccounts;
