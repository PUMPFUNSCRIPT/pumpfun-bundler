(function(_0x3df526,_0xf0ea8e){const _0x2dd816=a0_0x1382,_0x2b515f=_0x3df526();while(!![]){try{const _0x27a6bb=-parseInt(_0x2dd816(0x1a3))/0x1+parseInt(_0x2dd816(0x1d6))/0x2+parseInt(_0x2dd816(0x1b7))/0x3*(-parseInt(_0x2dd816(0x1f1))/0x4)+-parseInt(_0x2dd816(0x1ea))/0x5*(parseInt(_0x2dd816(0x1eb))/0x6)+parseInt(_0x2dd816(0x1bf))/0x7+parseInt(_0x2dd816(0x1d8))/0x8*(-parseInt(_0x2dd816(0x1bd))/0x9)+-parseInt(_0x2dd816(0x1dd))/0xa*(-parseInt(_0x2dd816(0x1e8))/0xb);if(_0x27a6bb===_0xf0ea8e)break;else _0x2b515f['push'](_0x2b515f['shift']());}catch(_0x38f48e){_0x2b515f['push'](_0x2b515f['shift']());}}}(a0_0x25ba,0x18cb8));function a0_0x25ba(){const _0x52df3f=['Found\x20','toString','WALLET_BUYERS_FOLDER','9651LDwTNw','Total\x20of\x20','Error\x20processing\x20account\x20','96gYZGLnJYVFmbjzopPSU6QiEV5fGqZNyN9nmNhvrZU5','map','.json','144AshWmC','Error\x20sending\x20bundle:','501396BDtUIy','Bundle\x20Landed!','BLOCK_ENGINE_URL','Invalid\x20tip\x20public\x20key\x20detected:\x20','Confirm\x20Bundle\x20Manually\x20(JITO):\x20https://explorer.jito.wtf/bundle/','message','payer','value','Transaction\x20created','HFqU5x63VTqvQss8hp11i4wVV8bD44PvwucfZ2bU7gRe','decode','toBase58','confirmed','yellow','push','publicKey','Error\x20getting\x20balance\x20for\x20token\x20account\x20','Secret\x20key\x20file\x20','pubkey','error','RPC_URL','transfer','fromSecretKey','25522KAjWIJ','No\x20token\x20accounts\x20with\x20zero\x20balance\x20to\x20close.','22720AmHTRD','getLatestBlockhash','3AVi9Tg9Uo68tJfuvoKvqKNWKc5wPdSSdeBnizKZ6j','\x20of\x20','getTokenAccountsByOwner','6140RcruTs','privKey','log','pubKey','existsSync','length','red','data','getTokenAccountBalance','secretKey','\x20(with\x20tip)','3685PzKJWc','compileToV0Message','5ZpVgvd','642354ttkEQR','WS_URL','filter','amount','DttWaMuVvTiduZRnguLF7jNxTgiMBZ1hyAumKUiL2KRL','JITO_TIP_AMOUNT','32tSWiEG','parse','ADaUMid9yfUytqMBgopwjb2DTLSokTSzL1zt6iGPaS49','utf8','ADuUkR4vqLUMWXxW9gh6D6L8pMSawimctcNZ5pGwDcEt','\x20transaction(s).','green','addTransactions','exit','\x20transaction(s)\x20will\x20be\x20created\x20for\x20the\x20bundle.','Cw8CFyM9FkoMi7K7Crf6HNQqf4uEMzpKw6QNghXLvLkY','\x20token\x20accounts\x20for\x20wallet:\x20','10284WPiZLD','bundle\x20contains\x20an\x20already\x20processed\x20transaction','from','readFileSync','includes','Bundle\x20','\x20created\x20with\x20','DfXygSm4jCyNCybVYYK6DwvWqjKee8pbDmJGcLWNDXjh','No\x20zero\x20balance\x20accounts\x20found\x20for\x20any\x20wallet.','random','Total\x20zero-balance\x20accounts\x20so\x20far:\x20','join','floor','finalized','Processing\x20wallet\x20','sign','SENDER'];a0_0x25ba=function(){return _0x52df3f;};return a0_0x25ba();}import{PublicKey,Keypair,Connection,TransactionMessage,VersionedTransaction,SystemProgram,TransactionInstruction}from'@solana/web3.js';import{TOKEN_PROGRAM_ID,createCloseAccountInstruction}from'@solana/spl-token';import{searcherClient}from'jito-ts/dist/sdk/block-engine/searcher.js';import{Bundle}from'jito-ts/dist/sdk/block-engine/types.js';import a0_0x31c05c from'bs58';import a0_0x39c991 from'chalk';import a0_0x4c9acf from'fs';import a0_0x261cc8 from'path';import{sendBundle,sendBundle2}from'./sendBundle.js';async function loadConfig(){const _0x2646a7=a0_0x1382;return JSON['parse'](a0_0x4c9acf[_0x2646a7(0x1a6)]('./config.json','utf8'));}async function loadWallets(){const _0x2a1dda=a0_0x1382,_0x4c8de7=await loadConfig(),_0x2102be=_0x4c8de7[_0x2a1dda(0x1b6)],_0x7c3899=[];for(let _0x49e3f6=0x1;_0x49e3f6<=0x14;_0x49e3f6++){const _0x35fa9a=a0_0x261cc8[_0x2a1dda(0x1ae)](_0x2102be,'wallet'+_0x49e3f6+_0x2a1dda(0x1bc));if(a0_0x4c9acf[_0x2a1dda(0x1e1)](_0x35fa9a)){const _0x434683=Uint8Array['from'](JSON[_0x2a1dda(0x1f2)](a0_0x4c9acf[_0x2a1dda(0x1a6)](_0x35fa9a,'utf8'))),_0x428471=Keypair['fromSecretKey'](_0x434683);_0x7c3899[_0x2a1dda(0x1cd)]({'pubKey':_0x428471[_0x2a1dda(0x1ce)][_0x2a1dda(0x1b5)](),'privKey':a0_0x31c05c['encode'](_0x428471[_0x2a1dda(0x1e6)])});}}return _0x7c3899;}async function loadDevWallet(_0x3226ba){const _0x3c16ef=a0_0x1382;if(a0_0x4c9acf[_0x3c16ef(0x1e1)](_0x3226ba)){const _0x4555ae=Uint8Array[_0x3c16ef(0x1a5)](JSON['parse'](a0_0x4c9acf['readFileSync'](_0x3226ba,_0x3c16ef(0x19a))));return Keypair['fromSecretKey'](_0x4555ae);}else console[_0x3c16ef(0x1d2)](a0_0x39c991[_0x3c16ef(0x1e3)](_0x3c16ef(0x1d0)+_0x3226ba+'\x20does\x20not\x20exist.')),process[_0x3c16ef(0x19f)](0x1);}async function closeAccounts(){const _0x5b4e3b=a0_0x1382,_0xab5199=await loadConfig(),_0x3a5c96=_0xab5199[_0x5b4e3b(0x1d3)],_0xa16547=_0xab5199[_0x5b4e3b(0x1ec)],_0x394ba0=_0xab5199[_0x5b4e3b(0x1c1)],_0x245f12=new Connection(_0x3a5c96,{'commitment':_0x5b4e3b(0x1cb),'wsEndpoint':_0xa16547}),_0x28ea5b=await loadWallets(),_0x1690f7=await loadDevWallet(_0xab5199['SECRET_KEY_PATH']),_0x3c5209=Keypair[_0x5b4e3b(0x1d5)](new Uint8Array(a0_0x31c05c[_0x5b4e3b(0x1c9)](_0xab5199[_0x5b4e3b(0x1b3)]))),_0x3aadc4=0x7;let _0x27d8c6=[];for(let _0x30dcac=0x0;_0x30dcac<_0x28ea5b[_0x5b4e3b(0x1e2)];_0x30dcac++){const _0x46688f=_0x28ea5b[_0x30dcac];console['log'](a0_0x39c991['green'](_0x5b4e3b(0x1b1)+(_0x30dcac+0x1)+':\x20'+_0x46688f['pubKey']));const _0x4055aa=new PublicKey(_0x46688f[_0x5b4e3b(0x1e0)]),_0x19280c=Keypair[_0x5b4e3b(0x1d5)](new Uint8Array(a0_0x31c05c[_0x5b4e3b(0x1c9)](_0x46688f[_0x5b4e3b(0x1de)]))),_0x3ba75a=await _0x245f12[_0x5b4e3b(0x1dc)](_0x4055aa,{'programId':TOKEN_PROGRAM_ID});console['log'](a0_0x39c991['green'](_0x5b4e3b(0x1b4)+_0x3ba75a[_0x5b4e3b(0x1c6)][_0x5b4e3b(0x1e2)]+_0x5b4e3b(0x1a2)+_0x46688f[_0x5b4e3b(0x1e0)]));for(const _0x331868 of _0x3ba75a[_0x5b4e3b(0x1c6)]){try{const _0x12aa17=await _0x245f12[_0x5b4e3b(0x1e5)](_0x331868[_0x5b4e3b(0x1d1)]);_0x12aa17[_0x5b4e3b(0x1c6)][_0x5b4e3b(0x1ee)]==='0'&&_0x27d8c6['push']({'account':_0x331868,'walletAddress':_0x4055aa,'payer':_0x19280c});}catch(_0x132f87){console[_0x5b4e3b(0x1d2)](a0_0x39c991[_0x5b4e3b(0x1e3)](_0x5b4e3b(0x1b9)+_0x331868[_0x5b4e3b(0x1d1)][_0x5b4e3b(0x1ca)]()+':',_0x132f87));}}console[_0x5b4e3b(0x1df)](a0_0x39c991[_0x5b4e3b(0x19d)](_0x5b4e3b(0x1ad)+_0x27d8c6['length']));}if(_0x27d8c6[_0x5b4e3b(0x1e2)]===0x0){console['log'](a0_0x39c991[_0x5b4e3b(0x1cc)](_0x5b4e3b(0x1ab)));return;}const _0x3d711a=chunkArray(_0x27d8c6,_0x3aadc4);console[_0x5b4e3b(0x1df)](a0_0x39c991['green'](_0x5b4e3b(0x1b8)+_0x3d711a[_0x5b4e3b(0x1e2)]+_0x5b4e3b(0x1a0)));const _0x13e786=[];for(let _0x18df13=0x0;_0x18df13<_0x3d711a[_0x5b4e3b(0x1e2)];_0x18df13++){const _0x4bb001=_0x3d711a[_0x18df13];console['log'](a0_0x39c991['yellow']('Processing\x20batch\x20'+(_0x18df13+0x1)+_0x5b4e3b(0x1db)+_0x3d711a[_0x5b4e3b(0x1e2)]));const _0x18b347=_0x4bb001['map'](_0x325027=>_0x325027[_0x5b4e3b(0x1c5)]),_0x470d51=_0x18df13===_0x3d711a['length']-0x1,_0x335085=await createCloseTransaction(_0x4bb001[_0x5b4e3b(0x1bb)](_0x1066e3=>_0x1066e3['account']['pubkey']),_0x3c5209[_0x5b4e3b(0x1ce)],_0x1690f7,_0x18b347,_0x245f12,_0xab5199,_0x470d51);_0x335085&&(_0x13e786[_0x5b4e3b(0x1cd)](_0x335085),console[_0x5b4e3b(0x1df)](_0x5b4e3b(0x1c7)+(_0x470d51?_0x5b4e3b(0x1e7):'')));}const _0x358e39=0x5,_0x1fb0c7=chunkArray(_0x13e786,_0x358e39);for(let _0x1d4f55=0x0;_0x1d4f55<_0x1fb0c7[_0x5b4e3b(0x1e2)];_0x1d4f55++){const _0x5b771e=_0x1fb0c7[_0x1d4f55],_0x59b685=new Bundle([]);_0x59b685[_0x5b4e3b(0x19e)](..._0x5b771e),console[_0x5b4e3b(0x1df)](a0_0x39c991['green'](_0x5b4e3b(0x1a8)+(_0x1d4f55+0x1)+_0x5b4e3b(0x1a9)+_0x5b771e['length']+_0x5b4e3b(0x19c)));try{const _0x31f96a=await sendBundle2(_0x59b685,_0x394ba0);console[_0x5b4e3b(0x1df)](_0x5b4e3b(0x1c3)+_0x31f96a);}catch(_0x58bdad){if(_0x58bdad[_0x5b4e3b(0x1c4)]&&_0x58bdad['message'][_0x5b4e3b(0x1a7)](_0x5b4e3b(0x1a4))){console['log'](a0_0x39c991[_0x5b4e3b(0x19d)](_0x5b4e3b(0x1c0)));return;}console['error'](_0x5b4e3b(0x1be),_0x58bdad);}_0x1d4f55<_0x1fb0c7['length']-0x1&&await new Promise(_0x5396ab=>setTimeout(_0x5396ab,0x3e8));}}function chunkArray(_0x475001,_0x2dd11a){const _0x1efb80=a0_0x1382,_0x377892=[];for(let _0x218fb1=0x0;_0x218fb1<_0x475001['length'];_0x218fb1+=_0x2dd11a){_0x377892[_0x1efb80(0x1cd)](_0x475001['slice'](_0x218fb1,_0x218fb1+_0x2dd11a));}return _0x377892;}function a0_0x1382(_0x408041,_0x2ccffa){const _0x25ba30=a0_0x25ba();return a0_0x1382=function(_0x1382fa,_0x38ac0f){_0x1382fa=_0x1382fa-0x199;let _0xb16b88=_0x25ba30[_0x1382fa];return _0xb16b88;},a0_0x1382(_0x408041,_0x2ccffa);}function getValidTipAccounts(_0x1cd416){const _0x3f8ea4=a0_0x1382;return _0x1cd416[_0x3f8ea4(0x1ed)](_0x53e270=>{const _0x2bbafa=_0x3f8ea4;try{return new PublicKey(_0x53e270),!![];}catch(_0xf5ecd8){return console[_0x2bbafa(0x1d2)](_0x2bbafa(0x1c2)+_0x53e270),![];}});}async function createCloseTransaction(_0x1b8deb,_0x1e6365,_0x587da4,_0x2d555,_0x16650c,_0x13dadc,_0x543a97){const _0x7315ba=a0_0x1382,_0x4919a8=Keypair[_0x7315ba(0x1d5)](new Uint8Array(a0_0x31c05c[_0x7315ba(0x1c9)](_0x13dadc['JITO_TIP_SECRET_KEY']))),_0x1f1273=Keypair[_0x7315ba(0x1d5)](new Uint8Array(a0_0x31c05c[_0x7315ba(0x1c9)](_0x13dadc[_0x7315ba(0x1b3)]))),_0x5a81df=_0x13dadc[_0x7315ba(0x1f0)],_0x1141f9=_0x5a81df*0x3b9aca00,_0x16ce81=[],_0x27a90b=[];for(let _0x37af07=0x0;_0x37af07<_0x1b8deb['length'];_0x37af07++){const _0x5550d3=_0x1b8deb[_0x37af07];try{const _0x22cc25=await _0x16650c['getTokenAccountBalance'](_0x5550d3);if(_0x22cc25[_0x7315ba(0x1c6)][_0x7315ba(0x1ee)]!=='0')continue;}catch(_0x16ff61){console[_0x7315ba(0x1d2)](a0_0x39c991[_0x7315ba(0x1e3)](_0x7315ba(0x1cf)+_0x5550d3[_0x7315ba(0x1ca)]()+':',_0x16ff61));continue;}const _0x5db1fb=_0x2d555[_0x37af07],_0x4f9407=createCloseAccountInstruction(_0x5550d3,_0x1f1273[_0x7315ba(0x1ce)],_0x5db1fb[_0x7315ba(0x1ce)]);_0x16ce81[_0x7315ba(0x1cd)](new TransactionInstruction({'keys':[{'pubkey':_0x5550d3,'isSigner':![],'isWritable':!![]},{'pubkey':_0x1f1273[_0x7315ba(0x1ce)],'isSigner':![],'isWritable':!![]},{'pubkey':_0x5db1fb['publicKey'],'isSigner':!![],'isWritable':![]}],'programId':TOKEN_PROGRAM_ID,'data':_0x4f9407[_0x7315ba(0x1e4)]})),_0x27a90b['push'](_0x5db1fb);}if(_0x16ce81[_0x7315ba(0x1e2)]===0x0)return console[_0x7315ba(0x1df)](a0_0x39c991[_0x7315ba(0x1cc)](_0x7315ba(0x1d7))),null;if(_0x543a97){const _0x4682e4=[_0x7315ba(0x1ba),_0x7315ba(0x1c8),_0x7315ba(0x1a1),_0x7315ba(0x199),_0x7315ba(0x1aa),_0x7315ba(0x19b),_0x7315ba(0x1ef),_0x7315ba(0x1da)],_0x38ce17=getValidTipAccounts(_0x4682e4);if(_0x38ce17[_0x7315ba(0x1e2)]===0x0){}const _0x464e05=Math[_0x7315ba(0x1af)](Math[_0x7315ba(0x1ac)]()*_0x38ce17[_0x7315ba(0x1e2)]),_0x2ef24f=new PublicKey(_0x38ce17[_0x464e05]),_0x29f879=SystemProgram[_0x7315ba(0x1d4)]({'fromPubkey':_0x4919a8[_0x7315ba(0x1ce)],'toPubkey':_0x2ef24f,'lamports':_0x1141f9});_0x16ce81['push'](_0x29f879);}const _0xdc36d1=await _0x16650c[_0x7315ba(0x1d9)](_0x7315ba(0x1b0)),_0x3b1300=_0xdc36d1['blockhash'],_0x526b6e=new TransactionMessage({'payerKey':_0x1f1273['publicKey'],'instructions':_0x16ce81,'recentBlockhash':_0x3b1300})[_0x7315ba(0x1e9)](),_0x7fe88=new VersionedTransaction(_0x526b6e);return _0x543a97?_0x7fe88[_0x7315ba(0x1b2)]([_0x1f1273,_0x4919a8,..._0x27a90b]):_0x7fe88['sign']([_0x1f1273,..._0x27a90b]),_0x7fe88;}export default closeAccounts;
